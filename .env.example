# 三角机构TRPG单人引擎 - 环境变量配置示例
# 复制此文件为 .env 并填入实际值

# ============================================
# 服务器配置
# ============================================
SERVER_PORT=8080
SERVER_MODE=debug  # debug, release, test
SERVER_READ_TIMEOUT=30
SERVER_WRITE_TIMEOUT=30
SERVER_IDLE_TIMEOUT=120

# ============================================
# 数据库配置
# ============================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=trpg
DATABASE_PASSWORD=trpg_password
DATABASE_NAME=trpg_solo_engine
DATABASE_SSLMODE=disable  # disable, require, verify-ca, verify-full
DATABASE_MAX_OPEN_CONNS=25
DATABASE_MAX_IDLE_CONNS=5
DATABASE_CONN_MAX_LIFETIME=300
DATABASE_AUTO_MIGRATE=true

# ============================================
# Redis配置
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2

# ============================================
# AI服务配置
# ============================================
AI_PROVIDER=openai  # openai, local, azure
AI_API_KEY=your_api_key_here
AI_MODEL=gpt-4
AI_BASE_URL=
AI_TIMEOUT=30
AI_MAX_TOKENS=2000
AI_TEMPERATURE=0.7
AI_ENABLE_CACHE=true

# ============================================
# 认证配置
# ============================================
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRATION=86400  # 24小时
JWT_REFRESH_EXPIRATION=604800  # 7天
ENABLE_AUTH=false  # 开发环境可关闭

# ============================================
# 速率限制配置
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GLOBAL_MAX_REQUESTS=1000
RATE_LIMIT_GLOBAL_WINDOW=60

# ============================================
# 日志配置
# ============================================
LOG_LEVEL=info  # debug, info, warn, error, fatal
LOG_FORMAT=json  # json, console
LOG_OUTPUT=stdout  # stdout, stderr, file
LOG_FILE_PATH=logs/app.log
LOG_ENABLE_CALLER=true

# ============================================
# 游戏配置
# ============================================
SCENARIOS_PATH=scenarios
ARC_CONFIGS_PATH=configs
SESSION_TIMEOUT=86400
AUTO_SAVE_INTERVAL=300

# ============================================
# CORS配置
# ============================================
CORS_ENABLED=true
CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true

# ============================================
# 监控配置
# ============================================
MONITORING_ENABLED=true
PROMETHEUS_ENABLED=true
TRACING_ENABLED=false

# ============================================
# 开发配置
# ============================================
ENABLE_PPROF=false
PPROF_PORT=6060
ENABLE_SWAGGER=true
MOCK_AI=false  # 使用模拟AI（用于测试）
SEED_DATA=false  # 加载种子数据
